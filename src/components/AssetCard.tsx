/**
 * @format
 * @flow strict-local
 */

import React, { memo, ReactElement } from 'react';
import { LayoutAnimation, StyleSheet, Image } from 'react-native';
import { View, Text, Pressable } from '../styles/components';
import Card from './Card';
import BitcoinLogo from '../assets/bitcoin-logo.svg';
import LightningLogo from '../assets/lightning-logo.svg';

const HeaderIcon = ({ id = 'bitcoin' }): ReactElement => {
	try {
		switch (id) {
			case 'bitcoin':
				return <BitcoinLogo viewBox="0 0 70 70" height={55} width={55} />;
			case 'lightning':
				return <LightningLogo viewBox="0 0 300 300" height={55} width={55} />;
			case 'omnibolt':
				return (
					<Image
						style={styles.image}
						source={require('../assets/omnibolt.png')}
					/>
				);
			default:
				return <BitcoinLogo viewBox="0 0 70 70" height={55} width={55} />;
		}
	} catch {
		return <BitcoinLogo viewBox="0 0 70 70" height={55} width={55} />;
	}
};

const AssetCard = ({
	asset = 'bitcoin',
	title = 'Bitcoin Wallet',
	description = '',
	assetBalanceLabel = '0 BTC',
	fiatBalanceLabel = '$0',
	onPress = (): null => null,
	children = <View />,
}: {
	asset: string;
	title: string;
	description?: string;
	assetBalanceLabel: string;
	fiatBalanceLabel: string;
	onPress?: Function;
	children?: ReactElement | false;
}): ReactElement => {
	LayoutAnimation.easeInEaseOut();

	return (
		<Card>
			<>
				<Pressable onPress={onPress} color="transparent" style={styles.row}>
					<View color="transparent" style={styles.col1}>
						<HeaderIcon id={asset} />
					</View>
					<View color="transparent" style={styles.col2}>
						<>
							<Text style={styles.title}>{title}</Text>
							{description ? (
								<Text style={styles.description}>{description}</Text>
							) : null}
							<View color="transparent" style={styles.labelsContainer}>
								<View color="transparent" style={styles.balanceLabelContainer}>
									<Text style={styles.balanceLabels}>{assetBalanceLabel}</Text>
								</View>
								<View color="transparent" style={styles.fiatLabelContainer}>
									<Text style={styles.balanceLabels}>{fiatBalanceLabel}</Text>
								</View>
							</View>
						</>
					</View>
				</Pressable>
				{children}
			</>
		</Card>
	);
};

const styles = StyleSheet.create({
	title: {
		fontWeight: 'bold',
		fontSize: 16,
	},
	description: {
		fontSize: 12,
	},
	labelsContainer: {
		flex: 1,
		flexDirection: 'row',
		alignItems: 'flex-end',
	},
	balanceLabelContainer: {
		flex: 1,
	},
	balanceLabels: {
		marginBottom: 5,
	},
	col1: {
		flex: 0.6,
		justifyContent: 'center',
		alignItems: 'flex-start',
	},
	col2: {
		flex: 2.2,
	},
	fiatLabelContainer: {
		flex: 1,
		alignItems: 'flex-end',
		justifyContent: 'flex-end',
	},
	row: {
		flexDirection: 'row',
	},
	image: {
		width: 50,
		height: 50,
		borderRadius: 50,
	},
});

export default memo(AssetCard);
